@model List<BusinessLogicLayer.Dtos.OrderDtos.OrderMyAccount>

<body class="template-color-1">
    <div class="main-wrapper">
        <!-- Begin Hiraola's Breadcrumb Area -->
        <div class="breadcrumb-area">
            <div class="container">
                <div class="breadcrumb-content">
                    <h2>Khác</h2>
                    <ul>
                        <li><a href="/Home/Index">Trang Chủ</a></li>
                        <li class="active">Tài Khoản</li>
                    </ul>
                </div>
            </div>
        </div>
        <!-- Hiraola's Breadcrumb Area End Here -->
        <!-- Begin Hiraola's Page Content Area -->
        <main class="page-content">
            <!-- Begin Hiraola's Account Page Area -->
            <div class="account-page-area">
                <div class="container">
                    <div class="row">
                        <div class="col-lg-3">
                            <ul class="nav myaccount-tab-trigger" id="account-page-tab" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="account-orders-tab" data-bs-toggle="tab" href="#account-orders" role="tab" aria-controls="account-orders" aria-selected="false">Đơn Hàng</a>
                                </li>                                
                                
                                <li class="nav-item">
                                    <a class="nav-link" id="account-logout-tab" href="/Logout" role="tab" aria-selected="false">Đăng Xuất</a>
                                </li>
                            </ul>
                        </div>
                        <div class="col-lg-9">
                            <div class="tab-content myaccount-tab-content" id="account-page-tab-content">
                                <div class="tab-pane fade show active" id="account-orders" role="tabpanel" aria-labelledby="account-orders-tab">
                                    <div class="myaccount-orders">
                                        <h4 class="small-title">ĐƠN HÀNG CỦA TÔI</h4>
                                        @if (Model == null || !Model.Any())
                                        {
                                            <p>Chưa có đơn hàng nào.</p>
                                        }
                                        else
                                        {
                                            <div class="table-responsive">
                                                <table class="table table-bordered table-hover">
                                                    <thead>
                                                        <tr>
                                                            <th>MÃ ĐƠN HÀNG</th>
                                                            <th>NGÀY ĐẶT</th>
                                                            <th>MÃ GIAO HÀNG</th>
                                                            <th>TỔNG CỘNG</th>
                                                            <th>THAO TÁC</th>
                                                            <th>VIETTELPOST</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        @foreach (var order in Model)
                                                        {
                                                            <tr>
                                                                <td><a class="account-order-id" href="@Url.Action("OrderDetails", "MyAccount", new { orderId = order.OrderId })">#@order.OrderId.ToString().Substring(0, 8)</a></td>
                                                                <td>@order.OrderDate.ToString("dd/MM/yyyy")</td>
                                                                @if(order.CodeShipping != null)
                                                                {
                                                                    <td>@order.CodeShipping</td>
                                                                }
                                                                else
                                                                {
                                                                    <td>@order.Status</td>
                                                                }
                                                                <td>@order.TotalAmount.ToString("N0") ₫ cho @order.ItemCount sản phẩm</td>
                                                                <td>
                                                                    <a href="@Url.Action("OrderDetails", "MyAccount", new { orderId = order.OrderId })" class="hiraola-btn hiraola-btn_dark hiraola-btn_sm">
                                                                        <span>Xem</span>
                                                                    </a>
                                                                </td>
                                                                <td>
                                                                    <a href="https://viettelpost.com.vn/tra-cuu-hanh-trinh-don/" target="_blank" class="hiraola-btn hiraola-btn_dark hiraola-btn_sm">
                                                                        <span>Tra cứu</span>
                                                                    </a>
                                                                </td>
                                                            </tr>
                                                        }
                                                    </tbody>
                                                </table>
                                            </div>
                                            <!-- Phân trang đồng nhất với ProductList -->
                                            <div class="hiraola-paginatoin-area">
                                                <div class="row">
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <ul class="hiraola-pagination-box">
                                                            @if (ViewBag.PageNumber > 1)
                                                            {
                                                                <li>
                                                                    <a asp-action="Index"
                                                                       asp-controller="MyAccount"
                                                                       asp-route-pageNumber="@(ViewBag.PageNumber - 1)"
                                                                       asp-route-pageSize="@ViewBag.PageSize">
                                                                        <i class="ion-ios-arrow-left"></i>
                                                                    </a>
                                                                </li>
                                                            }
                                                            @for (var i = 1; i <= ViewBag.TotalPages; i++)
                                                            {
                                                                <li class="@(i == ViewBag.PageNumber ? "active" : "")">
                                                                    <a asp-action="Index"
                                                                       asp-controller="MyAccount"
                                                                       asp-route-pageNumber="@i"
                                                                       asp-route-pageSize="@ViewBag.PageSize">@i</a>
                                                                </li>
                                                            }
                                                            @if (ViewBag.PageNumber < ViewBag.TotalPages)
                                                            {
                                                                <li>
                                                                    <a asp-action="Index"
                                                                       asp-controller="MyAccount"
                                                                       asp-route-pageNumber="@(ViewBag.PageNumber + 1)"
                                                                       asp-route-pageSize="@ViewBag.PageSize">
                                                                        <i class="ion-ios-arrow-right"></i>
                                                                    </a>
                                                                </li>
                                                            }
                                                        </ul>
                                                    </div>
                                                    <div class="col-lg-6 col-md-6 col-sm-6">
                                                        <div class="product-select-box">
                                                            <div class="product-short">
                                                                <p>(@(ViewBag.PageSize * (ViewBag.PageNumber - 1) + 1) - @(Math.Min(ViewBag.PageSize * ViewBag.PageNumber, ViewBag.TotalCount))) - (@ViewBag.TotalPages Trang)</p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        }

                                    </div>
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- Hiraola's Account Page Area End Here -->
        </main>
        <!-- Hiraola's Page Content Area End Here -->
    </div>
</body>
